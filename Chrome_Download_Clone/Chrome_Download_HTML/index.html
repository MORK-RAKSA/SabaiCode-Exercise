<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <title>Downloads Mork Raksa</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="icon" href="./assets/icons8_download.ico" style="color: #fff" />
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->
  </head>
  <body>
    <div class="nav-container">
      <div class="logo">
        <i
          class="fa-brands fa-chrome"
          style="font-size: 25px; margin-right: 10px"
        ></i>
        <a href="#">Downloads</a>
      </div>
      <div class="search-box">
        <i class="fa-solid fa-magnifying-glass"></i>
        <input
          class="search-input"
          type="text"
          placeholder="Search downloads"
          id="searchInput"
        />
      </div>
      <i
        class="fa-solid fa-ellipsis-vertical"
        style="
          display: flex;
          justify-content: center;
          align-items: center;
          color: #fff;
        "
      ></i>
    </div>

    <!------------------------ body-container ------------------------------>

    <div class="body-container">
      <div class="download-list" style="margin-top: 80px">
        <!-- <span class="download-header">Today</span>
        <div class="download-item">
          <img src="./assets/pdf.png" alt="" />
          <div class="download-detail">
            <span class="download-link text"><a href="#">File</a></span
            ><br /><br />
            <span class="download-size">100 KB • Downloaded 2 hours ago</span
            ><br /><br />
            <span class="download-action-showInFolder text">Show in folder</span>
          </div>
          <div class="download-action">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div> -->
      </div>
      <div class="download-list">
        <span class="download-header">Yesterday</span>
        <div class="download-item">
          <img src="./assets/PS file.png" alt="" />
          <div class="download-detail">
            <span class="download-link text"><a href="#">File</a></span
            ><br /><br />
            <span class="download-size">100 KB • Downloaded 1 day ago</span
            ><br /><br />
            <span class="download-action-showInFolder text">Show in folder</span>
          </div>
          <div class="download-action">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div>
        <div class="download-item">
          <img src="./assets/folder.png" alt="" />
          <div class="download-detail">
            <span class="download-link text"><a href="#">File</a></span
            ><br /><br />
            <span class="download-size">100 KB • Downloaded 1 day ago</span
            ><br /><br />
            <span class="download-action-showInFolder text">Show in folder</span>
          </div>
          <div class="download-action">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div>
        <div class="download-item">
          <img src="./assets/pdf.png" alt="" />
          <div class="download-detail">
            <span class="download-link text"><a href="#">File</a></span
            ><br /><br />
            <span class="download-size">100 KB • Downloaded 1 day ago</span
            ><br /><br />
            <span class="download-action-showInFolder text">Show in folder</span>
          </div>
          <div class="download-action">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div>
        <div class="download-item">
          <img src="./assets/google-docs.png" alt="" />
          <div class="download-detail">
            <span class="download-link text"><a href="#">File</a></span
            ><br /><br />
            <span class="download-size">100 KB • Downloaded 1 day ago</span
            ><br /><br />
            <span class="download-action-showInFolder text">Show in folder</span>
          </div>
          <div class="download-action">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div>
      </div>
      <div class="download-list">
        <span class="download-header">23 Feb 2024</span>
        <div class="download-item">
          <img src="./assets/zip.png" alt="" />
          <div class="download-detail">
            <span class="download-link text"><a href="#">File</a></span
            ><br /><br />
            <span class="download-size"
              >100 KB • Downloaded 23 Feb 2024 ago</span
            ><br /><br />
            <span class="download-action-showInFolder text">Show in folder</span>
          </div>
          <div class="download-action">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div>
        <div class="download-item">
          <img src="./assets/pdf.png" alt="" />
          <div class="download-detail">
            <span class="download-link text"><a href="#">File</a></span
            ><br /><br />
            <span class="download-size"
              >100 KB • Downloaded 23 Feb 2024 ago</span
            ><br /><br />
            <span class="download-action-showInFolder text">Show in folder</span>
          </div>
          <div class="download-action">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div>
        <div class="download-item">
          <img src="./assets/folder.png" alt="" />
          <div class="download-detail">
            <span class="download-link text"><a href="#">File</a></span
            ><br /><br />
            <span class="download-size"
              >100 KB • Downloaded 23 Feb 2024 ago</span
            ><br /><br />
            <span class="download-action-showInFolder text">Show in folder</span>
          </div>
          <div class="download-action">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div>
        <div class="download-item">
          <img src="./assets/folder.png" alt="" />
          <div class="download-detail">
            <span class="download-link text"><a href="#">File</a></span
            ><br /><br />
            <span class="download-size"
              >100 KB • Downloaded 23 Feb 2024 ago</span
            ><br /><br />
            <span class="download-action-showInFolder text">Show in folder</span>
          </div>
          <div class="download-action">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div>
        <div class="download-item">
          <img src="./assets/google-docs.png" alt="" />
          <div class="download-detail">
            <span class="download-link text"><a href="#">File</a></span
            ><br /><br />
            <span class="download-size"
              >100 KB • Downloaded 23 Feb 2024 ago</span
            ><br /><br />
            <span class="download-action-showInFolder text">Show in folder</span>
          </div>
          <div class="download-action">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div>
        <div class="download-item">
          <img src="./assets/image.png" alt="" />
          <div class="download-detail">
            <span class="download-link text"><a href="#">File</a></span
            ><br /><br />
            <span class="download-size"
              >100 KB • Downloaded 23 Feb 2024 ago</span
            ><br /><br />
            <span class="download-action-showInFolder text">Show in folder</span>
          </div>
          <div class="download-action">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div>
      </div>
    </div>

    <!-- --------------------------------------------------------------------------------- -->
    <!-- <div class="modal-form" id="modal">
        <input type="file" id="avatar" name="avatar" accept="" />
        <button type="submit">Upload</button>
    </div>
    <div class="addFile" onclick="toggleModal()"><a href="#modal">Add</a></div>
    <script>
        function toggleModal() {
          var modal = document.getElementById('modal');
          modal.style.visibility = (modal.style.visibility === 'visible') ? 'hidden' : 'visible';
        }
      </script> -->

    <div class="modal-form" id="modal">
      <form id="uploadForm" onsubmit="addNewDownload(event)">
        <label for="" class="mb-lg-4 ">Drag and Drop File or</label>
        <input type="file" id="avatar" name="avatar" accept="" />
        <button type="submit">Upload</button>
        <button class="btnCancel" onclick="toggleModal()">Cancel</button>
      </form>
    </div>

    <div class="addFile" onclick="toggleModal()"><a href="#modal">Add</a></div>

    <script>
      function toggleModal() {
        var modal = document.getElementById("modal");
        modal.style.visibility =
          modal.style.visibility === "visible" ? "hidden" : "visible";
      }

      function addNewDownload(event) {
        event.preventDefault();

        var fileInput = document.getElementById("avatar");
        var file = fileInput.files[0];

        var currentDate = new Date();
        var formattedDate = currentDate.toLocaleDateString();

        // Function to update the download-header to current date or "Today"/"Yesterday"
        function updateDownloadHeader() {
          var currentDate = new Date();
          var formattedDate;

          // Check if the current date is today
          if (
            currentDate.toLocaleDateString() === new Date().toLocaleDateString()
          ) {
            formattedDate = "Today";
          } else {
            // Otherwise, it's yesterday
            currentDate.setDate(currentDate.getDate() - 1); // Get yesterday's date
            formattedDate = "Yesterday";
          }

          // Check if "Today"/"Yesterday" header already exists
          var headerExists = document.querySelector(".download-header");
          if (!headerExists || headerExists.textContent !== formattedDate) {
            // If "Today"/"Yesterday" header does not exist or if it's for a different date, create a new header
            var header = document.createElement("span");
            header.classList.add("download-header");
            header.textContent = formattedDate;

            // Append the new header to the download list
            var downloadList = document.querySelector(".download-list");
            downloadList.insertBefore(header, downloadList.firstChild);
          }
        }

        // Call the function to update the header initially
        updateDownloadHeader();

        var downloadItem = document.createElement("div");
        downloadItem.classList.add("download-item");
        downloadItem.innerHTML = `
                <img src="./assets/${getFileIcon(file.type)}" alt="">
                <div class="download-detail">
                    <span class="download-link text"><a href="#">${
                      file.name
                    }</a></span><br><br>
                    <span class="download-size">${(file.size / 1024).toFixed(
                      2
                    )} KB • Uploaded ${currentDate.toLocaleTimeString()}</span><br><br>
                    <span class="download-action-showInFolder text">Show in folder</span>
                </div>
                <div class="download-action">
                    <i class="fa-solid fa-xmark"></i>
                </div>
            `;

        var todayHeader = document.querySelector(".download-header");
        todayHeader.parentNode.insertBefore(
          downloadItem,
          todayHeader.nextSibling
        );

        document.getElementById("uploadForm").reset();
        toggleModal();
      }

      function getFileIcon(fileType) {
        switch (fileType) {
          case "application/pdf":
            return "pdf.png";
          case "application/vnd.google-apps.document":
            return "google-docs.png";
          case "application/zip":
            return "zip.png" | "zip.jpg";
          case "image/jpeg":
          case "image/png":
          case "image/gif":
            return "image.png";
          case "text/plain":
            return "txt.png";
          case "application/msword":
          case "application/vnd.openxmlformats-officedocument.wordprocessingml.document":
            return "word.png";
          case "application/vnd.ms-excel":
          case "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":
            return "sheets.png";
          case "application/vnd.ms-powerpoint":
          case "application/vnd.openxmlformats-officedocument.presentationml.presentation":
            return "ppt.png";
          case "application/vnd.adobe.photoshop":
            return "ps.png";
          case "application/vnd.adobe.illustrator":
            return "ai.png";
          case "application/x-msdownload":
            return "program.png";

          default:
            return "file.png";
        }
      }
    </script>
  </body>
</html>
